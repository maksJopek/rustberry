#!/bin/sh
# Get pull request description
echo "Add description (new line as <br>)"
read user_desc

# Get pull request name
pr_title="$(git branch | grep \* | sed 's/\*\ //')"
echo "Title (default $pr_title)"
read user_pr

[[ "$user_pr" == "" ]] || pr_title="$user_pr"

# Get issue
issue="$(echo $pr_title | grep -oP '(?!\-)\d+(?=\|)')"
echo "Issue (default $issue)"
read user_issue

[[ "$user_issue" == "" ]] || issue="$user_issue"

# Link to issue
desc="Close #$issue"

# Final check
echo "Title: $pr_title"
echo "Issue: $issue"
echo "Description: $desc<br>$user_desc"
echo "Press anything to continue"
read

# Magic
gh pr create -t "$pr_title" -B develop -b "$desc<br>$user_desc"
